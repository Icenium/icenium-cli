<html>
<head>
	<title>Telerik AppBuilder Login</title>

	<script type="text/javascript" src="login-config.js"></script>
	<script type="text/javascript" src="knockout.js"></script>
	<link rel="stylesheet" type="text/css" href="style.css"/>
</head>

<body>
	<div data-bind="foreach: viewModel">
		<div class="provider" data-bind="click: openLogin">
			<span data-bind="text: DisplayName"/>
		</div>
	</div>

	<script type="text/javascript">
		function showProviders(providers) {
			ko.applyBindings({viewModel: providers});
		}

		function openLogin(provider) {
			window.location = provider.LoginUrl;
		}

		var script = document.createElement('script');
		script.type = "text/javascript";
		script.src = loginConfig.tfisServer + "/identityproviders/List.js" +
			"?client_id=" + encodeURIComponent(loginConfig.clientId) + 
			"&callback=showProviders" +
			"&redirect_uri=" + encodeURIComponent(loginConfig.callbackUrl) +
			"&state=" + encodeURIComponent(loginConfig.clientState);

		document.body.appendChild(script);
	</script>
</body>
</html>
